<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.jit.dao.CustomerMapper">
	<!-- 查询分页后的List
	public List<BaseDict> pageRuslut(QueryVo vo);
	-->
	<select id="pageResult" parameterType="QueryVo" resultType="Customer">
		select * from customer
		<where>
			<if test="custName!=null">
<!-- 这里可以写and <if test="custName!=null and custName!=''"> -->
				cust_name = #{custName}
			</if>
			<if test="custSource!=null">
				and cust_source = #{custSource}
			</if>
			<if test="custIndustry!=null">
				and cust_industry = #{custIndustry}
			</if>
			<if test="custLevel!=null">
				and cust_level = #{custLevel}
			</if>
		</where>
		limit #{startindex},#{rows}
	</select>
	
	<!-- 查询符合条件的总页数
	public int getTotalPage(QueryVo vo);  -->
	<select id="getTotalPage" parameterType="QueryVo" resultType="Integer">
		select count(*) from customer
		<where>
			<if test="custName!=null">
				cust_name = #{custName}
			</if>
			<if test="custSource!=null">
				and cust_source = #{custSource}
			</if>
			<if test="custIndustry!=null">
				and cust_industry = #{custIndustry}
			</if>
			<if test="custLevel!=null">
				and cust_level = #{custLevel}
			</if>
		</where>
	</select>
	
	<!-- public Customer selectCustomerById(int id); -->
	<select id="selectCustomerById" parameterType="Integer" resultType="Customer">
		select * from customer where cust_id=#{id}
	</select>
	<!-- public void editCustomer(Customer customer); -->
	<update id="editCustomer" parameterType="Customer">
		update customer set 
		cust_name = #{cust_name},
		cust_source =#{cust_source},
		cust_industry = #{cust_industry},
		cust_level = #{cust_level},
		cust_linkman = #{cust_linkman},
		cust_phone = #{cust_phone},
		cust_mobile = #{cust_mobile},
		cust_zipcode = #{cust_zipcode},
		cust_address = #{cust_address} 
		where cust_id = #{cust_id}
	</update>
	
	<!-- public void deleteCustomerById(int id); -->
	<delete id="deleteCustomerById" parameterType="Integer">
		delete from customer where cust_id=#{id}
	</delete>
</mapper>
